<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Menu Inicial — MACs & Guias</title>
<meta name="description" content="Menu dinâmico para acessar MACs, Guias, Tabelas e Ferramentas. Favoritos, Recentes, Busca instantânea e atalhos de teclado." />
<style>
  :root{
    --azul:#007BFF;
    --accent:#0b5ed7;
    --fundo:#f7fbff;
    --card:#ffffff;
    --muted:#6b7280;
    --borda:#e6eefc;
    --borda-ativa:#cfe0ff;
    --ink:#0b3b6b;
    --ink-strong:#0b4fa0;
    --ok:#16a34a;
    --warn:#f59e0b;
    --glass: rgba(255,255,255,0.92);
    --shadow: 0 10px 30px rgba(11,78,167,.06);
  }
  html,body{height:100%;margin:0}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:linear-gradient(180deg,var(--fundo), #f3f7ff 80%);
    color:#111; -webkit-font-smoothing:antialiased; padding:18px;
  }
  .wrap{max-width:1120px;margin:0 auto}
  h1{margin:0 0 8px 0;font-size:22px;color:var(--accent)}
  p.lead{margin:4px 0 16px 0;color:var(--muted);font-size:13px}

  /* toolbar */
  .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;background:var(--card);border:1px solid var(--borda);border-radius:12px;padding:12px;box-shadow:var(--shadow);position:sticky;top:14px;z-index:60}
  .search{position:relative;flex:1 1 320px}
  .search input{width:100%;padding:12px 40px 12px 40px;border:1px solid var(--borda);border-radius:12px;background:#fbfdff;color:var(--ink);font-size:15px}
  .search input:focus{outline:2px solid rgba(11,78,167,.12);box-shadow:0 6px 20px rgba(11,78,167,.06)}
  .search .icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:.8}
  .search .clear{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:none;background:transparent;cursor:pointer;opacity:.6;font-size:14px}

  .prefs{display:flex;gap:8px;align-items:center}
  .toggle{display:flex;align-items:center;gap:8px;border:1px solid var(--borda);background:#fff;padding:8px 10px;border-radius:10px;cursor:pointer}
  .toggle input{accent-color:var(--azul)}
  .hint{font-size:13px;color:var(--muted);margin-left:auto;display:flex;gap:8px;align-items:center}
  .results-counter{font-weight:700;color:var(--ink);font-size:13px}
  .small-btn{border:1px solid var(--borda);background:#fff;padding:6px 8px;border-radius:9px;cursor:pointer;font-size:13px}

  /* chips */
  .row{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .row h2{font-size:13px;color:var(--ink-strong);margin:0 8px 0 0}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid var(--borda);background:#fff;color:var(--ink);font-weight:700;font-size:13px;text-decoration:none;transition:transform .12s,box-shadow .12s}
  .chip:hover{transform:translateY(-4px);box-shadow:0 8px 26px rgba(11,78,167,.06)}

  /* quick tiles */
  .quick{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin:14px 0 18px 0}
  .tile{display:flex;flex-direction:column;gap:8px;justify-content:center;align-items:flex-start;background:var(--card);border:1px solid var(--borda);border-radius:14px;padding:14px;text-decoration:none;color:var(--ink);box-shadow:0 8px 26px rgba(11,78,167,.04);transition:transform .12s}
  .tile:hover{transform:translateY(-6px);border-color:var(--borda-ativa);background:#fbfdff}
  .tile .title{font-weight:800;font-size:14px;color:var(--ink-strong)}
  .tile .sub{font-size:12px;color:var(--muted)}

  /* cards */
  .top-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-bottom:14px}
  .card{background:var(--card);border:1px solid var(--borda);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(11,78,167,.04);display:flex;gap:10px;align-items:center;justify-content:space-between}
  .card .text{flex:1}
  .card a.primary{display:inline-flex;align-items:center;gap:8px;text-decoration:none;color:var(--azul);font-weight:800}
  .card small{color:var(--muted);display:block;margin-top:6px;font-size:12px}
  .card .actions{display:flex;gap:6px;align-items:center}
  .btn{border:1px solid var(--borda);background:#fff;border-radius:10px;padding:8px 10px;cursor:pointer;font-size:13px;display:inline-flex;align-items:center;gap:8px;color:var(--ink)}
  .btn:hover{background:#f3f8ff;border-color:var(--borda-ativa)}
  .btn.primary{border-color:var(--azul);color:#fff;background:linear-gradient(180deg,var(--azul),var(--accent));}

  /* sections */
  .menu-list{margin:18px 0 24px 0;display:block}
  .section{margin-bottom:10px}
  .section-head{display:flex;align-items:center;justify-content:space-between;gap:8px;cursor:pointer;padding:10px;border-radius:12px;background:#fff;border:1px solid var(--borda)}
  .section-title{display:flex;gap:10px;align-items:center}
  .badge{background:var(--azul);color:white;padding:6px 10px;border-radius:10px;font-size:12px}
  .chev{transition:transform .18s ease;font-size:16px;color:var(--muted)}
  .chev.open{transform:rotate(90deg);color:var(--azul)}
  .section-body{max-height:0;overflow:hidden;transition:max-height .26s ease,padding .18s ease;padding:0 10px}
  .section-body.open{padding:10px}

  .list{list-style:none;margin:0;padding:0;display:block}
  .item{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
  .link-row{display:flex;align-items:center;gap:10px;flex:1;text-decoration:none;padding:8px;border-radius:10px;color:var(--ink);border:1px solid transparent}
  .link-row:hover{background:#f3f8ff;border-color:#e3f0ff}
  .suffix{display:flex;align-items:center;gap:6px}
  .star-btn{border:1px solid var(--borda);background:#fff;border-radius:10px;padding:6px;cursor:pointer;font-weight:700}
  .star-btn.active{border-color:#ffd166;background:#fff7d1}
  .no-link{display:flex;justify-content:space-between;padding:8px;border-radius:10px;color:var(--ink);border:1px dashed #eaf1ff;margin-bottom:6px}

  .list.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  @media (max-width:640px){.list.grid-2{grid-template-columns:1fr}}

  .meta{font-size:13px;color:var(--muted);margin-top:12px}
  .hide{display:none !important}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  mark{background:linear-gradient(90deg, rgba(11,78,167,0.18), rgba(11,78,167,0.06));padding:0 2px;border-radius:3px}
  [data-tip]{position:relative}
  [data-tip]:hover::after{content:attr(data-tip);position:absolute;white-space:nowrap;left:50%;transform:translateX(-50%);bottom:100%;margin-bottom:6px;background:#0b233f;color:#fff;padding:6px 8px;border-radius:6px;font-size:11px;box-shadow:0 6px 18px rgba(0,0,0,.2)}
  .modal{position:fixed;inset:0;background:rgba(3,16,38,.35);display:none;align-items:center;justify-content:center;padding:16px}
  .modal.open{display:flex}
  .sheet{background:#fff;border:1px solid var(--borda);border-radius:14px;max-width:560px;width:100%;padding:16px;box-shadow:0 20px 60px rgba(11,78,167,.22)}
</style>
</head>
<body>
<div class="wrap" role="main">
  <header>
    <h1>Menu Inicial</h1>
    <p class="lead">Acesse MACs, Guias, Tabelas e Ferramentas. Busca instantânea, Favoritos, Recentes e atalhos (digite <kbd>/</kbd>).</p>
  </header>

  <div class="toolbar" role="region" aria-label="Barra de busca e preferências">
    <div class="search" role="search">
      <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input id="q" type="search" placeholder="Buscar… (atalho: /)" aria-label="Buscar itens" autocomplete="off" />
      <button class="clear" id="btn-clear" title="Limpar busca" aria-label="Limpar busca">✕</button>
    </div>

    <div class="prefs">
      <label class="toggle" data-tip="Abrir links em nova aba">
        <input type="checkbox" id="pref-newtab" />
        <span>Abrir em nova aba</span>
      </label>

      <label class="toggle" data-tip="Mostrar apenas Favoritos (F)">
        <input type="checkbox" id="pref-only-fav" />
        <span>Somente favoritos</span>
      </label>

      <button class="small-btn" id="btn-clear-favs" title="Limpar favoritos" aria-label="Limpar favoritos">Limpar favoritos</button>
      <button class="small-btn" id="btn-clear-recents" title="Limpar recentes" aria-label="Limpar recentes">Limpar recentes</button>
    </div>

    <div class="hint" aria-live="polite">
      <span class="results-counter" id="results-count">—</span>
      <span>Dica: <kbd>/</kbd> foca a busca • <kbd>Esc</kbd> limpa</span>
    </div>
  </div>

  <div class="row" aria-label="Favoritos">
    <h2>Favoritos</h2>
    <div id="fav-chips" class="chips" role="list"></div>
  </div>
  <div class="row" aria-label="Recentes">
    <h2>Recentes</h2>
    <div id="recent-chips" class="chips" role="list"></div>
  </div>

  <section aria-label="Ações rápidas">
    <div class="quick">
      <a class="tile dynamic-link" href="listaordenada.html" data-id="tool-lista" data-group="Ferramentas">
        <svg class="icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><circle cx="4" cy="6" r="1"/><circle cx="4" cy="12" r="1"/><circle cx="4" cy="18" r="1"/></svg>
        <span class="title">Lista Ordenada</span>
        <span class="sub">Criar e gerenciar listas</span>
      </a>

      <a class="tile dynamic-link" href="ods.html" data-id="tool-ods" data-group="Ferramentas">
        <svg class="icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="4" width="18" height="14" rx="2" ry="2"/><path d="M7 8h10M7 12h10M7 16h6"/></svg>
        <span class="title">Abrir arquivo .ODS</span>
        <span class="sub">Visualizar planilhas</span>
      </a>

      <a class="tile dynamic-link" href="simularpedido.html" id="link-simularpedido" data-id="tool-simular" data-group="Ferramentas">
        <svg class="icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 6h15l-1.5 9H7.5L6 6z"/><circle cx="9" cy="20" r="1.5"/><circle cx="18" cy="20" r="1.5"/><path d="M6 6 5 3H2"/></svg>
        <span class="title">Simular Pedido</span>
        <span class="sub">Monte pré-pedidos</span>
      </a>

    </div>
  </section>

  <section aria-label="Tabelas e Catálogo">
    <div class="top-grid">
      <div class="card">
        <div class="text">
          <a class="primary dynamic-link" href="pdfs/Tabela%202025%20Geral.pdf" data-id="pdf-tabela-geral" data-group="PDFs">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
            <span class="search-txt">Tabela de Preços Geral</span>
          </a>
          <small>Tabela de preços uso geral e clientes.</small>
        </div>
        <div class="actions">
          <button class="btn star-btn" data-fav="pdf-tabela-geral" title="Favoritar" aria-label="Favoritar tabela geral">★</button>
          <button class="btn" data-copy href="pdfs/Tabela%202025%20Geral.pdf" aria-label="Copiar link">Copiar link</button>
        </div>
      </div>

      <div class="card">
        <div class="text">
          <a class="primary dynamic-link" href="pdfs/Tabela%202025%20Empresa.pdf" data-id="pdf-tabela-empresa" data-group="PDFs">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
            <span class="search-txt">Tabela de Preços Empresa</span>
          </a>
          <small>Tabela de preços uso empresa (pdf).</small>
        </div>
        <div class="actions">
          <button class="btn star-btn" data-fav="pdf-tabela-empresa" title="Favoritar" aria-label="Favoritar tabela empresa">★</button>
          <button class="btn" data-copy href="pdfs/Tabela%202025%20Empresa.pdf" aria-label="Copiar link">Copiar link</button>
        </div>
      </div>

      <div class="card">
        <div class="text">
          <a class="primary dynamic-link" href="https://github.com/henriteodoro/paratestes/releases/download/v1.0/Catalogo.Sao.Jose.2025.AT03.pdf" data-id="pdf-catalogo" data-group="PDFs">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M4 4v15"/></svg>
            <span class="search-txt">Catálogo</span>
          </a>
          <small>Catálogo de produtos (PDF).</small>
        </div>
        <div class="actions">
          <button class="btn star-btn" data-fav="pdf-catalogo" title="Favoritar" aria-label="Favoritar catálogo">★</button>
          <a class="btn" href="https://github.com/henriteodoro/paratestes/releases/download/v1.0/Catalogo.Sao.Jose.2025.AT03.pdf" target="_blank" rel="noopener">Baixar</a>
        </div>
      </div>
    </div>
  </section>

  <nav class="menu-list" aria-label="Menu principal">
    <!-- MACS -->
    <section class="section" id="sec-macs">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-macs">
        <div class="section-title"><span class="badge">MACS</span><h3>Lista de MACs</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-macs" class="section-body" aria-hidden="true">
        <ul class="list">
          <li class="item"><a id="mac77" class="link-row dynamic-link" href="mac77.html" data-id="mac77" data-group="MACS"><span class="search-txt">MAC Bairro São Geraldo - Cód. 77</span></a><button class="star-btn" data-fav="mac77" title="Favoritar" aria-label="Favoritar MAC 77">★</button></li>
          <li class="item"><a id="mac78" class="link-row dynamic-link" href="mac78.html" data-id="mac78" data-group="MACS"><span class="search-txt">MAC Bairro Planalto - Cód. 78</span></a><button class="star-btn" data-fav="mac78" title="Favoritar">★</button></li>
          <li class="item"><a id="mac79" class="link-row dynamic-link" href="mac79.html" data-id="mac79" data-group="MACS"><span class="search-txt">MAC Romeu Duarte - Cód. 79</span></a><button class="star-btn" data-fav="mac79" title="Favoritar">★</button></li>
          <li class="item"><a id="mac80" class="link-row dynamic-link" href="mac80.html" data-id="mac80" data-group="MACS"><span class="search-txt">MAC Rua São Geraldo / Centro 2 - Cód. 80</span></a><button class="star-btn" data-fav="mac80" title="Favoritar">★</button></li>
          <li class="item"><a id="mac277" class="link-row dynamic-link" href="mac277.html" data-id="mac277" data-group="MACS"><span class="search-txt">MAC Matriz - Cód. 277</span></a><button class="star-btn" data-fav="mac277" title="Favoritar">★</button></li>
          <li class="item"><a id="mac853" class="link-row dynamic-link" href="mac853.html" data-id="mac853" data-group="MACS"><span class="search-txt">MAC Concesso - Cód. 853</span></a><button class="star-btn" data-fav="mac853" title="Favoritar">★</button></li>
          <li class="item"><a id="mac1249" class="link-row dynamic-link" href="mac1249.html" data-id="mac1249" data-group="MACS"><span class="search-txt">MAC Jardim do Lago - Cód. 1249</span></a><button class="star-btn" data-fav="mac1249" title="Favoritar">★</button></li>
          <li class="item"><a id="mac989" class="link-row dynamic-link" href="mac989.html" data-id="mac989" data-group="MACS"><span class="search-txt">MAC Araújos - Cód. 989</span></a><button class="star-btn" data-fav="mac989" title="Favoritar">★</button></li>
        </ul>
      </div>
    </section>

    <!-- São José -->
    <section class="section" id="sec-saojose">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-saojose">
        <div class="section-title"><span class="badge">São José</span><h3>São José</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-saojose" class="section-body" aria-hidden="true">
        <ul class="list">
          <li class="item"><a class="link-row dynamic-link" href="saojose.html" data-id="saojose" data-group="São José"><span class="search-txt">São José</span></a><button class="star-btn" data-fav="saojose" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row plain-link" href="#" data-id="pao-total" data-group="São José"><span class="search-txt">Pão Total</span></a></li>
        </ul>
      </div>
    </section>

    <!-- Guias -->
    <section class="section" id="sec-guias">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-guias">
        <div class="section-title"><span class="badge">Guias</span><h3>Guias</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-guias" class="section-body" aria-hidden="true">

        <div class="card" style="margin-bottom:8px;">
          <div tabindex="0" class="section-head sub-head" role="button" aria-expanded="false" data-target="body-guias-macs">
            <div class="section-title"><strong>Macs</strong></div>
            <div class="chev" aria-hidden="true">▶</div>
          </div>
          <div id="body-guias-macs" class="section-body sublist" aria-hidden="true">
            <ul class="list">
              <li class="no-link"><span class="search-txt">MAC 77 - Bairro São Geraldo</span></li>
              <li class="no-link"><span class="search-txt">MAC 78 - Bairro Planalto</span></li>
              <li class="no-link"><span class="search-txt">MAC 79 - Romeu Duarte</span></li>
              <li class="no-link"><span class="search-txt">MAC 80 - Rua São Geraldo / Centro 2</span></li>
              <li class="no-link"><span class="search-txt">MAC 277 - Matriz</span></li>
              <li class="no-link"><span class="search-txt">MAC 853 - Concesso</span></li>
              <li class="no-link"><span class="search-txt">MAC 1249 - Jardim do Lago</span></li>
              <li class="no-link"><span class="search-txt">MAC 989 - Araújos</span></li>
            </ul>
          </div>
        </div>

        <div class="card" style="margin-bottom:8px;">
          <div tabindex="0" class="section-head sub-head" role="button" aria-expanded="false" data-target="body-guias-somar">
            <div class="section-title"><strong>Redes Somar</strong></div>
            <div class="chev" aria-hidden="true">▶</div>
          </div>
          <div id="body-guias-somar" class="section-body sublist" aria-hidden="true">
            <ul class="list">
              <li class="no-link"><span class="search-txt">Somar 782 - Rua Joaquim Nabuco Bairro Porto Velho</span></li>
              <li class="no-link"><span class="search-txt">Kit do Adriano 793 - Divinópolis</span></li>
              <li class="no-link"><span class="search-txt">Kit 2 Irmãos 794 - Divinópolis</span></li>
              <li class="no-link"><span class="search-txt">Somar 795 - Rua Bom Sucesso Bairro Nações</span></li>
              <li class="no-link"><span class="search-txt">Somar 797 - Av. Espírito Santo Bairro Sidil</span></li>
              <li class="no-link"><span class="search-txt">Comércio de Alimentos Teixeira Rabelo 796 - Carmo do Cajuru</span></li>
              <li class="no-link"><span class="search-txt">Somar 1260 - Perdigão</span></li>
            </ul>
          </div>
        </div>

        <div class="card" style="margin-bottom:8px;">
          <div tabindex="0" class="section-head sub-head" role="button" aria-expanded="false" data-target="body-guias-ester">
            <div class="section-title"><strong>Ester Amaral</strong></div>
            <div class="chev" aria-hidden="true">▶</div>
          </div>
          <div id="body-guias-ester" class="section-body sublist" aria-hidden="true">
            <ul class="list">
              <li class="no-link"><span class="search-txt">Eifa Padaria e Confeitaria 33 - Rua Bahia Bairro Centro</span></li>
              <li class="no-link"><span class="search-txt">M.X.A. Comércio e Serviços 296 - Rua Itumiritinga Bairro Bom Pastor</span></li>
              <li class="no-link"><span class="search-txt">Ester Amaral Pães & Cia (MXA Comércio e Serviços) 854 - Rua Rio de Janeiro Bairro Levino de Paula Pereira</span></li>
              <li class="no-link"><span class="search-txt">Torre Gourmet 1102 - Rua Cristóvão Teixeira Bairro Bom Pastor</span></li>
            </ul>
          </div>
        </div>

        <div class="card" style="margin-bottom:8px;">
          <div tabindex="0" class="section-head sub-head" role="button" aria-expanded="false" data-target="body-guias-fidelis">
            <div class="section-title"><strong>Casa Fidélis</strong></div>
            <div class="chev" aria-hidden="true">▶</div>
          </div>
          <div id="body-guias-fidelis" class="section-body sublist" aria-hidden="true">
            <ul class="list">
              <li class="no-link"><span class="search-txt">Casa Fidélis 914 - Avenida Dr. Roberto Melo Queiroz</span></li>
              <li class="no-link"><span class="search-txt">Casa Fidélis 971 - Avenida Doutor Manoel Pereira</span></li>
              <li class="no-link"><span class="search-txt">Casa Fidélis 1088 - Avenida Guarujá</span></li>
              <li class="no-link"><span class="search-txt">Fidélis Supermercados (Comercial Neide) 1089 - Avenida Martinho Campos</span></li>
              <li class="no-link"><span class="search-txt">Casa Fidélis 273 - Luz</span></li>
            </ul>
          </div>
        </div>

        <div class="card" style="margin-bottom:8px;">
          <div tabindex="0" class="section-head sub-head" role="button" aria-expanded="false" data-target="body-guias-josildo">
            <div class="section-title"><strong>Supermercado Josildo</strong></div>
            <div class="chev" aria-hidden="true">▶</div>
          </div>
          <div id="body-guias-josildo" class="section-body sublist" aria-hidden="true">
            <ul class="list">
              <li class="no-link"><span class="search-txt">Supermercado Josildo 131 - Bairro Santa Clara</span></li>
              <li class="no-link"><span class="search-txt">Supermercado Josildo 132 - Bairro Icaraí</span></li>
            </ul>
          </div>
        </div>

      </div>
    </section>

    <!-- Ferramentas -->
    <section class="section" id="sec-future">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-future">
        <div class="section-title"><span class="badge">Ferramentas</span><h3>Ferramentas</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-future" class="section-body" aria-hidden="true">
        <ul class="list">
          <li class="item"><a class="link-row dynamic-link" href="listaordenada.html" data-id="m-lista" data-group="Ferramentas"><span class="search-txt">Lista Ordenada</span></a><button class="star-btn" data-fav="m-lista" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" href="ods.html" data-id="m-ods" data-group="Ferramentas"><span class="search-txt">Abrir arquivo .ODS</span></a><button class="star-btn" data-fav="m-ods" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" href="simularpedido.html" data-id="m-simular" data-group="Ferramentas"><span class="search-txt">Simular Pedido</span></a><button class="star-btn" data-fav="m-simular" title="Favoritar">★</button></li>
        </ul>
      </div>
    </section>

    <!-- Média por pacote (em breve) -->
    <section class="section" id="sec-media">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-media">
        <div class="section-title"><span class="badge">Média</span><h3>Lista de média de produto por pacote</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-media" class="section-body" aria-hidden="true">
        <div class="no-link" aria-live="polite"><span class="search-txt">Em breve</span></div>
      </div>
    </section>

    <!-- Planilhas de Autocontrole -->
    <section class="section" id="sec-autocontrole">
      <div tabindex="0" class="section-head" role="button" aria-expanded="false" data-target="body-autocontrole">
        <div class="section-title"><span class="badge">Planilhas</span><h3>Planilhas de Autocontrole Produção</h3></div>
        <div class="chev" aria-hidden="true">▶</div>
      </div>
      <div id="body-autocontrole" class="section-body" aria-hidden="true">
        <div class="card" style="margin-bottom:10px;border-color:var(--azul);background:#f7fbff;box-shadow:0 6px 18px rgba(11,78,167,0.08);">
          <div class="text">
            <a class="primary dynamic-link" target="_blank" href="pdfs/Planilhas%20de%20Autocontrole%20-%20P%C3%A3o%20de%20Ouro%20Atualizadas.pdf" data-id="pdf-autocontrole"><strong>PDF original</strong></a>
            <small>Arquivo completo para referência</small>
          </div>
          <div class="actions"><button class="btn star-btn" data-fav="pdf-autocontrole" title="Favoritar">★</button></div>
        </div>
        <ul class="list grid-2">
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Gilson.pdf" data-id="pl-gilson"><span class="search-txt">Setor Pão de Sal</span></a><button class="star-btn" data-fav="pl-gilson" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Cear%C3%A1.pdf" data-id="pl-ceara"><span class="search-txt">Setor Pães Doce</span></a><button class="star-btn" data-fav="pl-ceara" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Valdecino.pdf" data-id="pl-valdecino"><span class="search-txt">Setor Salgado e Biscoitos</span></a><button class="star-btn" data-fav="pl-valdecino" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Pre%20Pesagem.pdf" data-id="pl-pre"><span class="search-txt">Setor Pré-peságem</span></a><button class="star-btn" data-fav="pl-pre" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Embalagem.pdf" data-id="pl-emb"><span class="search-txt">Setor Embalagem</span></a><button class="star-btn" data-fav="pl-emb" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Jo%C3%A3o%20Estoque.pdf" data-id="pl-estoque"><span class="search-txt">Setor Estoque</span></a><button class="star-btn" data-fav="pl-estoque" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Jaqueline.pdf" data-id="pl-jaqueline"><span class="search-txt">Setor Limpeza</span></a><button class="star-btn" data-fav="pl-jaqueline" title="Favoritar">★</button></li>
          <li class="item"><a class="link-row dynamic-link" target="_blank" href="pdfs/Planilha%20Mateus.pdf" data-id="pl-mateus"><span class="search-txt">Setor Manutenção</span></a><button class="star-btn" data-fav="pl-mateus" title="Favoritar">★</button></li>
        </ul>
      </div>
    </section>

  </nav>

  <div class="meta">Dica: clique no título ou na seta para abrir as opções. • Este menu lembra suas preferências no navegador (sem login).</div>
</div>

<div class="modal" id="modal-help" role="dialog" aria-modal="true" aria-labelledby="help-title">
  <div class="sheet">
    <h3 id="help-title">Atalhos</h3>
    <ul>
      <li><kbd>/</kbd> — focar a busca</li>
      <li><kbd>Esc</kbd> — limpar busca</li>
      <li><kbd>Enter</kbd> — abrir o primeiro resultado visível</li>
      <li><kbd>F</kbd> — alternar “Somente favoritos”</li>
      <li><kbd>?</kbd> — abrir/fechar esta ajuda</li>
    </ul>
  </div>
</div>

<script>
const LS_KEYS = {
  openSections: 'menu:open-sections',
  newTab: 'menu:open-newtab',
  favorites: 'menu:favorites',
  recents: 'menu:recents',
  onlyFav: 'menu:only-fav'
};
const $ = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

function escapeRegex(s){ return s.replace(/[.*+?^${}()|[\\]\\]/g, '\\$&'); }
function normalize(s){ return (s||'').toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu,''); }

/* Sections */
function toggleSection(headEl){
  const targetId = headEl.getAttribute('data-target'); if(!targetId) return;
  const body = document.getElementById(targetId); if(!body) return;
  const chev = headEl.querySelector('.chev'); const isOpen = body.classList.contains('open');
  if(isOpen){ if(getComputedStyle(body).maxHeight === 'none') body.style.maxHeight = body.scrollHeight + 'px'; requestAnimationFrame(()=>{ body.style.maxHeight='0px'; body.classList.remove('open'); headEl.setAttribute('aria-expanded','false'); body.setAttribute('aria-hidden','true'); if(chev) chev.classList.remove('open'); persistOpenSections(); }); }
  else{ body.classList.add('open'); body.style.maxHeight = body.scrollHeight + 'px'; headEl.setAttribute('aria-expanded','true'); body.setAttribute('aria-hidden','false'); if(chev) chev.classList.add('open'); const onEnd = (e)=>{ if(e.propertyName !== 'max-height') return; if(body.classList.contains('open')) body.style.maxHeight='none'; body.removeEventListener('transitionend', onEnd); persistOpenSections(); }; body.addEventListener('transitionend', onEnd); }
}
function attachSectionHandlers(){ $$('.section-head').forEach(head=>{ if(head.__hasToggle) return; head.__hasToggle=true; head.addEventListener('click', ()=> toggleSection(head)); head.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleSection(head); } else if(e.key === 'ArrowRight'){ const b = $('#'+head.dataset.target); if(b && !b.classList.contains('open')) toggleSection(head); } else if(e.key === 'ArrowLeft'){ const b = $('#'+head.dataset.target); if(b && b.classList.contains('open')) toggleSection(head); } }); }); }
function persistOpenSections(){ const ids = $$('.section .section-body.open').map(b=>b.id); localStorage.setItem(LS_KEYS.openSections, JSON.stringify(ids)); }
function restoreOpenSections(){ try{ const ids = JSON.parse(localStorage.getItem(LS_KEYS.openSections) || '[]'); ids.forEach(id=>{ const head = document.querySelector(`[data-target="${id}"]`); const body = document.getElementById(id); if(head && body && !body.classList.contains('open')){ body.classList.add('open'); body.style.maxHeight='none'; head.setAttribute('aria-expanded','true'); const chev = head.querySelector('.chev'); if(chev) chev.classList.add('open'); } }); }catch{} }

/* Favorites & Recents */
function getFavs(){ try{ return new Set(JSON.parse(localStorage.getItem(LS_KEYS.favorites) || '[]')); }catch{ return new Set(); } }
function setFavs(set){ localStorage.setItem(LS_KEYS.favorites, JSON.stringify(Array.from(set))); }
function getRecents(){ try{ return JSON.parse(localStorage.getItem(LS_KEYS.recents) || '[]'); }catch{ return []; } }
function setRecents(list){ localStorage.setItem(LS_KEYS.recents, JSON.stringify(list)); }

function renderFavChips(){ const wrap = $('#fav-chips'); wrap.innerHTML=''; const favs = Array.from(getFavs()); favs.forEach(id=>{ const a = document.querySelector(`[data-id="${id}"]`); if(!a) return; const chip = document.createElement('a'); chip.className='chip'; chip.href=a.getAttribute('href')||'#'; chip.target=a.target||''; const label = a.querySelector('.search-txt') ? a.querySelector('.search-txt').textContent.trim() : a.textContent.trim(); chip.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 17.3l-6.2 3.7 1.6-6.9L2 8.9l7-.6L12 1.9l3 6.4 7 .6-5.4 5.2 1.6 6.9z"/></svg><span>${label}</span>`; chip.addEventListener('click',(e)=>{ e.preventDefault(); bumpRecent(a); window.location = chip.href; }); wrap.appendChild(chip); }); $('#results-count').textContent = favs.length ? `${favs.length} favoritos` : '—'; }

function renderRecentChips(){ const wrap = $('#recent-chips'); wrap.innerHTML=''; const recents = getRecents(); recents.forEach(id=>{ const a = document.querySelector(`[data-id="${id}"]`); if(!a) return; const chip = document.createElement('a'); chip.className='chip'; chip.href=a.getAttribute('href')||'#'; chip.target=a.target||''; const label = a.querySelector('.search-txt') ? a.querySelector('.search-txt').textContent.trim() : a.textContent.trim(); chip.innerHTML = `<span>${label}</span>`; chip.addEventListener('click',(e)=>{ e.preventDefault(); bumpRecent(a); window.location = chip.href; }); wrap.appendChild(chip); }); }

function bindStarButtons(){ $$('.star-btn').forEach(btn=>{ const id = btn.getAttribute('data-fav'); const favs = getFavs(); if(favs.has(id)) btn.classList.add('active'); btn.setAttribute('role','button'); btn.setAttribute('tabindex','0'); btn.setAttribute('aria-pressed', favs.has(id) ? 'true' : 'false'); const toggle = (e)=>{ e && e.stopPropagation(); const favs = getFavs(); if(favs.has(id)){ favs.delete(id); btn.classList.remove('active'); btn.setAttribute('aria-pressed','false'); } else { favs.add(id); btn.classList.add('active'); btn.setAttribute('aria-pressed','true'); } setFavs(favs); renderFavChips(); applySearch($('#q').value); }; btn.addEventListener('click', toggle); btn.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(e); } }); }); }

function bumpRecent(anchor){ const id = anchor.getAttribute('data-id'); if(!id) return; const arr = getRecents().filter(x=>x!==id); arr.unshift(id); if(arr.length>10) arr.pop(); setRecents(arr); renderRecentChips(); }

/* Search */
function applySearch(term){ const qRaw = term || ''; const q = normalize(qRaw); const onlyFav = $('#pref-only-fav').checked; const favs = getFavs(); let visibleCount = 0; $$('.section').forEach(sec=>{ let sectionHasAny = false; const items = Array.from(sec.querySelectorAll('.link-row, .card, .no-link')); items.forEach(node=>{ const txtEl = node.querySelector ? node.querySelector('.search-txt') : null; const text = txtEl ? normalize(txtEl.textContent) : normalize(node.textContent); const isFav = node.querySelector && node.querySelector('[data-id]') ? favs.has(node.querySelector('[data-id]').getAttribute('data-id')) : false; const passesFav = !onlyFav || isFav; const matches = !q || text.includes(q); const show = matches && passesFav; if(show){ node.classList.remove('hide'); // highlight
        if(txtEl && q){ const raw = txtEl.textContent; const re = new RegExp('('+escapeRegex(qRaw)+')','ig'); txtEl.innerHTML = raw.replace(re, '<mark>$1</mark>'); } else if(txtEl){ txtEl.innerHTML = txtEl.textContent; }
        sectionHasAny = true; visibleCount++; }
      else { // hide and clear highlight
        node.classList.add('hide'); if(txtEl) txtEl.innerHTML = txtEl.textContent; }
    }); const head = sec.querySelector('.section-head'); const body = sec.querySelector('.section-body'); if(q){ if(sectionHasAny && body && !body.classList.contains('open')) toggleSection(head); if(!sectionHasAny && body && body.classList.contains('open')) toggleSection(head); } }); // top-grid cards
  $$('.top-grid .card').forEach(card=>{ const txt = normalize((card.querySelector('.search-txt')||{textContent:''}).textContent||''); const isFav = card.querySelector('[data-fav]') && getFavs().has(card.querySelector('[data-fav]').getAttribute('data-fav')); const passesFav = !$('#pref-only-fav').checked || isFav; const matches = !q || txt.includes(q); card.classList.toggle('hide', !(matches && passesFav)); if(matches && passesFav) visibleCount++; if(card.querySelector('.search-txt')){ const span = card.querySelector('.search-txt'); if(q){ const raw = span.textContent; const re = new RegExp('('+escapeRegex(qRaw)+')','ig'); span.innerHTML = raw.replace(re,'<mark>$1</mark>'); } else span.innerHTML = span.textContent; } }); // quick tiles
  $$('.quick .tile').forEach(tile=>{ const txt = normalize((tile.querySelector('.title')||{textContent:''}).textContent||''); const isFav = getFavs().has(tile.getAttribute('data-id')); const passesFav = !$('#pref-only-fav').checked || isFav; const matches = !q || txt.includes(q); tile.classList.toggle('hide', !(matches && passesFav)); if(matches && passesFav) visibleCount++; if(tile.querySelector('.title')){ const span = tile.querySelector('.title'); if(q){ const raw = span.textContent; const re = new RegExp('('+escapeRegex(qRaw)+')','ig'); span.innerHTML = raw.replace(re,'<mark>$1</mark>'); } else span.innerHTML = span.textContent; } }); applySearch.visibleCount = visibleCount; updateResultsCounter(visibleCount); }
function updateResultsCounter(n){ const el = $('#results-count'); if(n === 0) el.textContent = 'Nenhum resultado'; else if(n === 1) el.textContent = '1 resultado'; else el.textContent = `${n} resultados`; }

/* New tab pref */
function applyNewTabPreference(){ const openNew = $('#pref-newtab').checked; $$('.dynamic-link').forEach(a=>{ if(openNew){ a.setAttribute('target','_blank'); a.setAttribute('rel','noopener'); } else { a.removeAttribute('target'); a.removeAttribute('rel'); } }); }

/* plain links */
function bindPlainLinks(){ $$('.plain-link').forEach(a=>{ a.addEventListener('click', (e)=>{ e.preventDefault(); alert('Página ainda não disponível (em breve).'); }); }); }

/* copy buttons */
function bindCopyButtons(){ $$('[data-copy]').forEach(btn=>{ const url = btn.getAttribute('href'); btn.addEventListener('click', async ()=>{ try{ await navigator.clipboard.writeText(new URL(url, location.href).href); btn.textContent='Copiado!'; setTimeout(()=> btn.textContent='Copiar link', 1200); } catch{ btn.textContent='Erro'; setTimeout(()=> btn.textContent='Copiar link', 1200); } }); }); }

/* dynamic links */
function bindDynamicLinks(){ $$('.dynamic-link').forEach(a=>{ a.addEventListener('click', ()=> bumpRecent(a)); }); }

/* only fav */
function syncOnlyFav(){ const only = $('#pref-only-fav').checked; localStorage.setItem(LS_KEYS.onlyFav, JSON.stringify(!!only)); applySearch($('#q').value); }

/* hash routing */
function handleHash(){ const h = decodeURIComponent(location.hash.replace('#','')); if(!h) return; const el = document.getElementById(h) || document.querySelector(`[data-id="${h}"]`); if(el){ const section = el.closest('.section'); if(section){ const head = section.querySelector('.section-head'); const body = section.querySelector('.section-body'); if(body && !body.classList.contains('open')) toggleSection(head); } el.scrollIntoView({behavior:'smooth', block:'center'}); el.classList.add('highlight'); setTimeout(()=> el.classList.remove('highlight'), 1200); } }

/* shortcuts */
function bindShortcuts(){ document.addEventListener('keydown', (e)=>{ if(e.key === '/'){ if(document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA'){ e.preventDefault(); $('#q').focus(); $('#q').select(); } }
    else if(e.key === 'Escape'){ if($('#q') === document.activeElement && $('#q').value){ $('#q').value=''; applySearch(''); } else { $('#q').blur(); } }
    else if(e.key === 'Enter' && document.activeElement === $('#q')){ const first = document.querySelector('.quick .tile:not(.hide), .top-grid .card:not(.hide) a, .menu-list .item:not(.hide) .link-row'); if(first){ first.click(); } }
    else if(e.key.toLowerCase() === 'f' && !['INPUT','TEXTAREA'].includes(document.activeElement.tagName)){ const c = $('#pref-only-fav'); c.checked = !c.checked; syncOnlyFav(); }
    else if(e.key === '?'){ $('#modal-help').classList.toggle('open'); }
  }); $('#modal-help').addEventListener('click', (e)=>{ if(e.target.id==='modal-help') e.currentTarget.classList.remove('open'); }); }

/* clear buttons */
function bindClearButtons(){ $('#btn-clear-favs').addEventListener('click', ()=>{ if(!confirm('Remover todos os favoritos?')) return; setFavs(new Set()); renderFavChips(); bindStarButtons(); applySearch($('#q').value); }); $('#btn-clear-recents').addEventListener('click', ()=>{ if(!confirm('Limpar históricos recentes?')) return; setRecents([]); renderRecentChips(); }); }

/* init */
function init(){ attachSectionHandlers(); bindPlainLinks(); bindCopyButtons(); bindDynamicLinks(); bindShortcuts(); bindClearButtons();
  const openNew = JSON.parse(localStorage.getItem(LS_KEYS.newTab) || 'true'); $('#pref-newtab').checked = openNew; applyNewTabPreference(); $('#pref-newtab').addEventListener('change', ()=>{ localStorage.setItem(LS_KEYS.newTab, JSON.stringify($('#pref-newtab').checked)); applyNewTabPreference(); });
  const onlyFav = JSON.parse(localStorage.getItem(LS_KEYS.onlyFav) || 'false'); $('#pref-only-fav').checked = !!onlyFav; $('#pref-only-fav').addEventListener('change', ()=> syncOnlyFav());
  $('#q').addEventListener('input', (e)=> applySearch(e.target.value)); $('#btn-clear').addEventListener('click', ()=>{ $('#q').value=''; applySearch(''); $('#q').focus(); });
  bindStarButtons(); renderFavChips(); renderRecentChips(); restoreOpenSections(); window.addEventListener('hashchange', handleHash); handleHash(); $$('.section-body.open').forEach(b=>{ b.style.maxHeight='none'; }); updateResultsCounter(document.querySelectorAll('.menu-list .item:not(.hide), .quick .tile:not(.hide), .top-grid .card:not(.hide)').length);
}
if(document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init); else init();
</script>
</body>
</html>
